(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{39:function(t,e,a){t.exports=a(70)},44:function(t,e,a){},46:function(t,e,a){},70:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(30),o=a.n(i),c=(a(44),a(11)),u=a(72),l=a(73),s=a(33),d=a(7),p=a.n(d),m=(a(46),a(74)),h=function(t){var e=t.station,a=t.setStation,n=t.sampling,i=t.setSampling,o=t.dataType,c=t.setDataType,u=t.date,l=t.setDate;return r.a.createElement(m.a,null,r.a.createElement(m.a.Row,null,r.a.createElement(s.a,null,r.a.createElement(m.a.Group,{controlId:"formStation"},r.a.createElement(m.a.Label,null,"Station"),r.a.createElement(m.a.Control,{type:"text",placeholder:"IAGA code",value:e,onChange:function(t){return a(t.target.value)}}))),r.a.createElement(s.a,null,r.a.createElement(m.a.Group,{controlId:"formDate"},r.a.createElement(m.a.Label,null,"Date"),r.a.createElement(m.a.Control,{type:"date",value:u.format("YYYY-MM-DD"),onChange:function(t){return l(p()(t.target.value))}})))),r.a.createElement(m.a.Row,null,r.a.createElement(s.a,null,r.a.createElement(m.a.Group,{controlId:"formSampling"},r.a.createElement(m.a.Label,null,"Sampling Period"),r.a.createElement(m.a.Control,{as:"select",value:n,onChange:function(t){return i(parseFloat(t.target.value))}},r.a.createElement("option",{value:"60"},"minute"),r.a.createElement("option",{value:"1"},"second")))),r.a.createElement(s.a,null,r.a.createElement(m.a.Group,{controlId:"formDataType"},r.a.createElement(m.a.Label,null,"Data Type"),r.a.createElement(m.a.Control,{as:"select",value:o,onChange:function(t){return c(t.target.value)}},r.a.createElement("option",null,"all"),r.a.createElement("option",null,"definitive"),r.a.createElement("option",null,"quasi-definitive"),r.a.createElement("option",null,"provisional"),r.a.createElement("option",null,"variation"))))))},f=a(38),y=a(34),E=a.n(y),_=function(t){var e=t.data,a=t.components,n=a.map(function(t){return function(t){var e=t.reduce(function(t,e){return null===e?t:t+e},0),a=t.reduce(function(t,e){return null===e?t:t+1},0);return 0===a?null:e/a}(e[t])}),i=a.map(function(t,a){return r=e[t],i=n[a],r.map(function(t){return null===t?null:t-i});var r,i}),o=a.map(function(t,a){return{x:e.datetime,y:i[a],xaxis:"x",yaxis:"y".concat(a+1),type:"scatter",mode:"line",name:"".concat(t.toUpperCase()," (").concat(n[a].toFixed(2)," nT)")}}),c=a.map(function(t,e){var a=10*Math.ceil(Math.max.apply(Math,Object(f.a)(i[e].map(Math.abs)))/10);return{title:"nT",zeroline:!1,showdividers:!1,range:[-a,a],fixedrange:!0}}),u="".concat(e.meta["Station Name"]," (").concat(e.meta["IAGA CODE"],")");return r.a.createElement(E.a,{style:{width:"100%",height:600},data:o,layout:{yaxis:c[0],yaxis2:c[1],yaxis3:c[2],title:u,grid:{rows:a.length,columns:1,pattern:"independant"}}})},v=a(71),g=function(t){var e=t.data,a=Object.keys(e.meta).map(function(t){return r.a.createElement("tr",{key:t},r.a.createElement("th",null,t),r.a.createElement("td",null,e.meta[t]))});return r.a.createElement("details",null,r.a.createElement("summary",null,"Additional Details"),r.a.createElement(v.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("tbody",null,a)))},b=a(14),w=a.n(b),T=a(35),O=a(6),S=a(36),x=a.n(S),j=a(37),k=a(13),A=a(16),M=a(10),C=a(15),D=a(17),I=function(t){function e(){return Object(k.a)(this,e),Object(A.a)(this,Object(M.a)(e).apply(this,arguments))}return Object(C.a)(e,t),e}(Object(D.a)(Error)),R=function(t){function e(){return Object(k.a)(this,e),Object(A.a)(this,Object(M.a)(e).apply(this,arguments))}return Object(C.a)(e,t),e}(Object(D.a)(Error)),z=function(t,e){return Math.atan2(e,t)*(180/Math.PI)*60},F=function(t,e){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2))},L=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(k.a)(this,t),this._meta=e,this._data=a}return Object(j.a)(t,[{key:"isEmpty",get:function(){return!Object.keys(this._meta).length}},{key:"meta",get:function(){return this._meta}},{key:"data",get:function(){return this._data}},{key:"datetime",get:function(){return this._data.datetime}},{key:"x",get:function(){var t=this;if("x"in this._data)return this._data.x;if("h"in this._data&&"d"in this._data)return this._data.h.map(function(e,a){return null!==e&&null!==t._data.d[a]?(n=e,r=t._data.d[a],n*Math.cos(r*(Math.PI/180/60))):null;var n,r});throw new R("Require x or (h and d) components")}},{key:"y",get:function(){var t=this;if("y"in this._data)return this._data.y;if("h"in this._data&&"d"in this._data)return this._data.h.map(function(e,a){return null!==e&&null!==t._data.d[a]?(n=e,r=t._data.d[a],n*Math.sin(r*(Math.PI/180/60))):null;var n,r});throw new R("Require y or (h and d) components")}},{key:"z",get:function(){if("z"in this._data)return this._data.z;throw new R("Require z component")}},{key:"f",get:function(){if("f"in this._data)return this._data.f;throw new R("Require f component")}},{key:"d",get:function(){var t=this;if("d"in this._data)return this._data.d;if("x"in this._data&&"y"in this._data)return this._data.x.map(function(e,a){return null!==e&&null!==t._data.y[a]?(n=e,r=t._data.y[a],Math.atan2(r,n)*(180/Math.PI)*60):null;var n,r});throw new R("Require d or (x and y) components")}},{key:"h",get:function(){var t=this;if("h"in this._data)return this._data.h;if("x"in this._data&&"y"in this._data)return this._data.x.map(function(e,a){return null!==e&&null!==t._data.y[a]?F(e,t._data.y[a]):null});throw new R("Require h or (x and y) components")}},{key:"i",get:function(){var t=this;if("i"in this._data)return this._data.i;if("z"in this._data&&"h"in this._data)return this._data.h.map(function(e,a){return null!==e&&null!==t._data.z[a]?z(e,t._data.z[a]):null});if("z"in this._data&&"x"in this._data&&"y"in this._data)return this._data.x.map(function(e,a){return null!==e&&null!==t._data.y[a]&&null!==t._data.z[a]?z(F(e,t._data.y[a]),t._data.z[a]):null});throw new R("Require i or (z and h) or (z, x, and y) components")}}]),t}(),Y={parseIAGA2002:function(t){var e=t.split("\n"),a=[],n={datetime:[]},r={};return e.forEach(function(t){if(-1!==t.search(/^DATE /))t=t.split(/[ ]+/),a=[3,4,5,6].map(function(e){var a=t[e].substr(-1).toLowerCase();return n[a]=[],a});else if(-1!==t.search(/^[0-9]{4}-[0-9]{2}-[0-9]{2}/)){if(4!==a.length)throw new I("Missing elements in header");t=t.split(/[ ]+/),n.datetime.push(t[0]+"T"+t[1]),a.forEach(function(e,a){var r=parseFloat(t[a+3]);n[e].push(r>8e4?null:r)})}else-1!==t.search(/^ [A-Z]/)&&(r[t.substr(0,22).trim()]=t.substr(23,t.length-23-2).trim())}),new L(r,n)},GeomagneticData:L},G=function(t,e){switch(e.type){case"FETCH_INIT":return Object(O.a)({},t,{isLoading:!0,isError:!1});case"FETCH_SUCCESS":return Object(O.a)({},t,{isLoading:!1,isError:!1,data:e.payload});case"FETCH_FAILURE":return Object(O.a)({},t,{isLoading:!1,isError:!0});default:throw new Error}},q=function(t){var e=t.source,a=t.station,n=t.sampling,r=t.dataType,i=t.format,o=t.date;switch(a=a.toLowerCase(),n){case 60:n="minute";break;case 1:n="second";break;default:throw new Error("Unknown sampling period")}var c="all"===r?["definitive","quasi-definitive","provisional","variation"]:[r];return o=o instanceof p.a?o:p()(o),c.map(function(t){var c="".concat(a).concat(o.format("YYYYMMDD")).concat(r.substr(0,1)).concat(n.substr(0,3),".").concat(n.substr(0,3)),u="".concat(e,"/").concat(n,"/").concat(r,"/").concat(i,"/").concat(o.format("YYYY/MM"),"/");return["".concat(u).concat(c,".gz"),"".concat(u).concat(c)]}).flat()},P=function(t,e){switch(e.type){case"SET_SOURCE":return Object(O.a)({},t,{source:e.payload});case"SET_STATION":return Object(O.a)({},t,{station:e.payload});case"SET_SAMPLING":return Object(O.a)({},t,{sampling:e.payload});case"SET_DATATYPE":return Object(O.a)({},t,{dataType:e.payload});case"SET_FORMAT":return Object(O.a)({},t,{format:e.payload});case"SET_DATE":return Object(O.a)({},t,{date:e.payload});default:throw new Error}},U=function(t){var e=Object(n.useReducer)(P,Object.assign({source:"",station:"",sampling:60,dataType:"variation",format:"IAGA2002",date:p()()},t)),a=Object(c.a)(e,2),r=a[0],i=a[1],o=Object(n.useReducer)(G,{isLoading:!1,isError:!1,data:new Y.GeomagneticData}),u=Object(c.a)(o,2),l=u[0],s=u[1];Object(n.useEffect)(function(){var t=!1;return function(){var e=Object(T.a)(w.a.mark(function e(){var a,n,i,o,c,u,l;return w.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s({type:"FETCH_INIT"}),a=!0,n=!1,i=void 0,e.prev=4,o=q(r)[Symbol.iterator]();case 6:if(a=(c=o.next()).done){e.next=24;break}return u=c.value,e.prev=8,e.next=11,x()(u);case 11:if(l=e.sent,t){e.next=15;break}return s({type:"FETCH_SUCCESS",payload:Y.parseIAGA2002(l.data)}),e.abrupt("break",24);case 15:e.next=20;break;case 17:return e.prev=17,e.t0=e.catch(8),e.abrupt("continue",21);case 20:t||s({type:"FETCH_FAILURE"});case 21:a=!0,e.next=6;break;case 24:e.next=30;break;case 26:e.prev=26,e.t1=e.catch(4),n=!0,i=e.t1;case 30:e.prev=30,e.prev=31,a||null==o.return||o.return();case 33:if(e.prev=33,!n){e.next=36;break}throw i;case 36:return e.finish(33);case 37:return e.finish(30);case 38:case"end":return e.stop()}},e,null,[[4,26,30,38],[8,17],[31,,33,37]])}));return function(){return e.apply(this,arguments)}}()(),function(){t=!0}},[r]);var d={setSource:function(t){return i({type:"SET_SOURCE",payload:t})},setStation:function(t){return i({type:"SET_STATION",payload:t})},setSampling:function(t){return i({type:"SET_SAMPLING",payload:t})},setDataType:function(t){return i({type:"SET_DATATYPE",payload:t})},setFormat:function(t){return i({type:"SET_FORMAT",payload:t})},setDate:function(t){return i({type:"SET_DATE",payload:t})}};return Object(O.a)({},l,r,d)},N=function(){var t=Object(n.useState)(["x","y","z"]),e=Object(c.a)(t,2),a=e[0],i=e[1],o=U({source:"https://origin1.geomag.nrcan.gc.ca/intermagnet/data/",station:"ott",date:p()()}),d=o.data,m=o.station,f=o.setStation,y=o.sampling,E=o.setSampling,v=o.dataType,b=o.setDataType,w=o.date,T=o.setDate;return r.a.createElement(u.a,null,r.a.createElement(l.a,null,r.a.createElement(s.a,null,r.a.createElement(h,{station:m,setStation:f,sampling:y,setSampling:E,dataType:v,setDataType:b,date:w,setDate:T,components:a,setComponents:i}))),r.a.createElement(l.a,null,r.a.createElement(s.a,null,d.isEmpty?r.a.createElement("div",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(_,{data:d,components:a}),r.a.createElement(g,{data:d})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.48298616.chunk.js.map